# Счётчик в каталоге мини-приложений

Бейдж с количеством уведомлений в мини-приложении

Разработчик может добавить бейдж с количеством уведомлений (счётчик уведомлений) на квадратную обложку и квадратную обложку для каталога мини-приложения.

Пример: число непрочитанных сообщений в игре. Если событий больше 99, то счётчик будет показывать 99+.

Счётчик можно подключить программно к мини-приложению, которое пользователь:

• запускал из каталога более 3 раз за любой срок;

• добавил в избранные вне зависимости от нахождения мини-приложения в каталоге.

Обратите внимание, что счётчик сам по себе не подсчитывает уведомления, но даёт возможность отобразить число, которое разработчик должен рассчитать самостоятельно.

Как подключить счётчик уведомлений

Чтобы счётчик показал количество уведомлений в мини-приложении, нужно вызвать метод secure.setCounter с сервисным ключом доступа. В запросе укажите идентификатор пользователя и значение счётчика.

Например, чтобы показать количество новых сообщений в мини-приложении, нужно отправить следующий запрос.

POST https://api.vk.com/method/secure.setCounter?user_id=<ИДЕНТИФИКАТОР_ПОЛЬЗОВАТЕЛЯ>&counter=<ЗНАЧЕНИЕ_СЧЁТЧИКА>&v=<ВЕРСИЯ_API>&access_token=<КЛЮЧ_ДОСТУПА> HTTP/1.1

Параметры запроса:

• user_id — идентификатор пользователя, который увидит счётчик уведомлений;

• counter — значение счётчика (количество новых сообщений);

• v — версия API;

• access_token — сервисный ключ доступа мини-приложения.

Обратите внимание! Не вызывайте метод в клиентской части мини-приложения — вы можете открыть ваш сервисный ключ доступа злоумышленникам.

Как отключить счётчик уведомлений

Пользователь может в любой момент отключить счётчик уведомлений в настройках мини-приложения. Чтобы отключить уведомления для конкретного мини-приложения, нужно:

1. Открыть vk.com или мобильное приложение ВКонтакте.
2. Перейти в раздел Сервисы.
3. Нажать на мини-приложение.
4. Нажать кнопку •••.
5. Нажать кнопку Выключить счетчик уведомлений.